<div class="person">
  <div class="person__stripe"></div>
  <ng-container *ngIf="personsInfo">
    <div class="person__details">
      <div class="person__photo">
        <img
          src="{{ personsInfo.posterUrl }}"
          alt="poster"
          class="person__img"
        />
      </div>

      <div class="person__info">
        <div class="person__main-info">
          <div class="person__gender-and-name">
            <ng-container *ngIf="!!personsInfo.sex">
              <mat-icon
                class="person__icon-title"
                [ngClass]="
                  personsInfo.sex === GENDER.FEMALE ? '_female' : '_male'
                "
              >
                {{ personsInfo.sex === GENDER.FEMALE ? 'female' : 'male' }}
              </mat-icon>
            </ng-container>
            <div class="person__name">
              <ng-container *ngIf="personsInfo.nameRu; else NameEnTemplate">
                {{ personsInfo.nameRu }}
              </ng-container>
              <ng-template #NameEnTemplate>
                {{ personsInfo?.nameEn }}
              </ng-template>
            </div>
          </div>
          <div class="person__name-en">
            <ng-container *ngIf="personsInfo.nameRu">
              {{ personsInfo.nameEn }}
            </ng-container>
          </div>
        </div>

        <div class="person__details-data">
          <div class="person__data">
            <ng-container *ngIf="!!personsInfo.birthday">
              <div class="person__date-title">Дата рождения</div>
              <div class="person__label-info">
                {{ personsInfo.birthday | date: 'dd MMMM yyyy':'GMT':'ru-Ru' }}
              </div>
            </ng-container>
            <ng-container *ngIf="!!personsInfo.death || !!personsInfo.age">
              <div class="person__age-title">
                {{ !!personsInfo.death ? 'Дата смерти' : 'Возраст' }}
              </div>
              <div class="person__label-info">
                {{
                  !!personsInfo.death
                    ? (personsInfo.death | date: 'dd MMMM yyyy':'GMT':'ru-Ru')
                    : personsInfo.age
                }}
              </div>
            </ng-container>
          </div>
          <div class="person__place" *ngIf="!!personsInfo.birthplace">
            <div class="person__birthplace-title">Место рождения</div>
            <div class="person__label-info">
              {{ personsInfo.birthplace }}
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="person__own-dossier">
      <div class="person__profession" *ngIf="personsInfo.profession">
        <div class="person__title">Профессия</div>
        <div class="person__profession-name">
          {{ personsInfo.profession }}
        </div>
      </div>
      <div class="person__spouses" *ngIf="personsInfo?.spouses?.length !== 0">
        <div class="person__title">Отношения</div>
        <ng-container *ngFor="let spousesItem of personsInfo?.spouses">
          <div class="person__relation">
            <div class="person__icon-and-name">
              <mat-icon
                class="person__icon"
                [ngClass]="
                  spousesItem.relation === SPOUSES.WIFE ? '_female' : '_male'
                "
              >
                {{ spousesItem.relation === SPOUSES.WIFE ? 'female' : 'male' }}
              </mat-icon>

              <a
                class="person__spouses-link-name"
                routerLink="/persons/{{ spousesItem.personId }}"
              >
                {{ spousesItem.name }}
              </a>
            </div>
            <div class="person__divorced">
              {{ spousesItem.divorced ? 'Разведены' : 'В браке' }}
            </div>
            <div class="person__children">
              {{
                spousesItem.children !== 0
                  ? 'Детей ' + spousesItem.children
                  : 'Детей нет'
              }}
            </div>
          </div>
        </ng-container>
      </div>
    </div>
    <div class="person__facts" *ngIf="personsInfo?.facts?.length !== 0">
      <div class="person__title">Факты</div>
      <ng-container *ngFor="let factsItem of personsInfo?.facts">
        <p class="person__fact-paragraph">{{ factsItem }}</p>
      </ng-container>
    </div>
    <div class="person__films">
      <div class="person__title">Фильмы</div>
      <ng-container *ngFor="let filmsItem of personsInfo?.films">
        <div class="person__film">
          <div class="person__rating-name">
            <div
              class="person__rating"
              *ngIf="filmsItem.rating; else emptyTemplate"
            >
              {{ filmsItem.rating }}
            </div>
            <ng-template #emptyTemplate>
              <div class="person__rating-empty"></div>
            </ng-template>
            <a
              class="person__film-name"
              routerLink="/details/{{ filmsItem?.kinopoiskId }}"
              >{{ filmsItem.nameRu || filmsItem.nameEn }}
            </a>
          </div>
          <div class="person__profession-key">
            {{ professions[filmsItem.professionKey] }}
          </div>
        </div>
      </ng-container>
    </div>
  </ng-container>
</div>
