<div class="person">
  <ng-container *ngIf="personsInfo">
    <div class="person__details">
      <div class="person__photo">
        <img
          src="{{ personsInfo?.posterUrl }}"
          alt="poster"
          class="person__img"
        />
      </div>

      <div class="person__info">
        <div class="person__genres-and-nameRuEn">
          <div class="person__genres-and-name">
            <ng-container *ngIf="personsInfo.sex !== ''">
              <mat-icon class="person__icon">
                {{ personsInfo.sex === 'FEMALE' ? 'female' : 'male' }}
              </mat-icon>
            </ng-container>
            <div class="person__name">
              <ng-container *ngIf="personsInfo.nameRu; else NameEnTemplate">
                {{ personsInfo?.nameRu }}
              </ng-container>
              <ng-template #NameEnTemplate>
                {{ personsInfo?.nameEn }}
              </ng-template>
            </div>
          </div>
          <div class="person__nameEn">
            <ng-container *ngIf="personsInfo.nameRu">
              {{ personsInfo?.nameEn }}
            </ng-container>
          </div>
        </div>

        <div class="person__details-data">
          <div class="person__data">
            <div class="person__date-title">Дата рождения</div>
            <div class="person__date">
              {{ personsInfo.birthday }}
            </div>
            <div class="person__age-title">Возраст</div>
            <div class="person__age">
              {{ personsInfo.age }}
            </div>
          </div>
          <div class="person__place">
            <div class="person__birthplace-title">Место рождения</div>
            <div class="person__birthplace">
              {{ personsInfo.birthplace }}
            </div>
          </div>
        </div>
        <ng-container *ngIf="personsInfo.death">
          <div class="person__death">
            {{ 'Дата смерти ' + personsInfo.death }}
          </div>
        </ng-container>
      </div>
    </div>
    <div class="person__own-dossier">
      <div class="person__profession">
        <div class="person__title">Профессия</div>
        <div class="person__profession-name">
          {{ personsInfo.profession }}
        </div>
      </div>
      <div class="person__spouses" *ngIf="personsInfo?.spouses?.length !== 0">
        <div class="person__title">Отношения</div>
        <ng-container *ngFor="let spousesItem of personsInfo?.spouses">
          <div class="person__relation">
            <div class="person__icon-and-name">
              <div class="person__icon">
                <mat-icon>
                  {{ spousesItem.relation === 'супруга' ? 'female' : 'male' }}
                </mat-icon>
              </div>

              <a
                class="person__spouses-link-name"
                routerLink="/persons/{{ spousesItem?.personId }}"
              >
                {{ spousesItem.name }}
              </a>
            </div>
            <div class="person__divorced">
              {{ spousesItem.divorced ? 'Разведены' : 'В браке' }}
            </div>
            <div class="person__children">
              {{
                spousesItem?.children !== 0
                  ? 'Детей ' + spousesItem.children
                  : 'Детей нет'
              }}
            </div>
          </div>
        </ng-container>
      </div>
    </div>
    <div class="person__facts" *ngIf="personsInfo?.facts?.length !== 0">
      <div class="person__title">Факты</div>
      <ng-container *ngFor="let factsItem of personsInfo?.facts">
        <p class="person__fact-paragraph">{{ factsItem }}</p>
      </ng-container>
    </div>
    <div class="person__films">
      <div class="person__title">Фильмы</div>
      <ng-container *ngFor="let filmsItem of personsInfo?.films">
        <div class="person__film">
          <div class="person__rating-name">
            <div
              class="person__rating"
              *ngIf="filmsItem.rating; else emptyTemplate"
            >
              {{ filmsItem.rating }}
            </div>
            <ng-template #emptyTemplate>
              <div class="person__rating-empty"></div>
            </ng-template>
            <a
              class="person__film-nameRu"
              routerLink="/details/{{ filmsItem?.filmId }}"
              >{{ filmsItem.nameRu ? filmsItem.nameRu : filmsItem.nameEn }}
            </a>
          </div>
          <div class="person__professionKey">
            {{ getRole(filmsItem.professionKey) }}
          </div>
        </div>
      </ng-container>
    </div>
  </ng-container>
</div>
